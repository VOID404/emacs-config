* UI
** All the icons
   #+BEGIN_SRC emacs-lisp
     (use-package all-the-icons
       :straight t
       :if (display-graphic-p))
   #+END_SRC

** Modeline
   #+BEGIN_SRC emacs-lisp
     (use-package doom-modeline
       :straight t
       :init
       (setq-default battery-mode-line-format "[%b%p%%  %t] ")
       (setq-default display-time-default-load-average nil)
       (setq-default display-time-format "%H:%M")
       :config
       (display-battery-mode)
       (display-time-mode)
       (doom-modeline-mode 1))
   #+END_SRC

** Which key
   #+BEGIN_SRC emacs-lisp
     (use-package which-key
       :straight t
       :config
       (which-key-mode 1))
   #+END_SRC

** Themes
   #+BEGIN_SRC emacs-lisp
     (use-package dracula-theme
       :straight t
       :defer t)

     (use-package base16-theme
       :straight t
       :defer t)

     (use-package cyberpunk-theme
       :straight t
       :defer t)

     (load-theme 'cyberpunk t)
   #+END_SRC
* Utils
** Neotree
   #+BEGIN_SRC emacs-lisp
     (use-package neotree
       :straight t
       :config
       (setq neo-theme (if (display-graphic-p) 'icons 'arrow))
       (setq neo-autorefresh nil)
       (setq neo-smart-open nil)
       (setq neo-window-fixed-size nil)
       :bind ("C-c f" . neotree-show))
   #+END_SRC

** Hydra
   #+BEGIN_SRC emacs-lisp
     (use-package hydra
       :straight t)
     (use-package pretty-hydra
       :straight t)
     (use-package major-mode-hydra
       :straight t
       :defer nil
       :bind
       ("M-SPC" . major-mode-hydra))
   #+END_SRC

** Auto Brackets
   #+BEGIN_SRC emacs-lisp
     (show-paren-mode)
     (use-package autopair
       :straight t
       :config
       (autopair-global-mode))
   #+END_SRC

** Projectile
   #+BEGIN_SRC emacs-lisp
     (use-package projectile
       :straight t
       :config
       (projectile-mode +1))
   #+END_SRC

** Transpose frame
   #+BEGIN_SRC emacs-lisp
     (use-package transpose-frame
       :straight t
       :pretty-hydra
       ((:color red :quit-key "q")
	("Transpose"
	 (("h" flop-frame "horizontal")
	  ("v" flip-frame "vertical")
	  ("r" rotate-frame-clockwise "rotate 90")
	  ("R" rotate-frame-clockwise "rotate 180"))))
       :bind ("C-c t" . transpose-frame-hydra/body))
   #+END_SRC

** Ivy
   #+BEGIN_SRC emacs-lisp
     (use-package ivy
       :straight t
       :config
       (ivy-mode 1))

     (use-package all-the-icons-ivy
       :straight t
       :after (ivy all-the-icons)
       :config
       (all-the-icons-ivy-setup))

     (use-package counsel
       :straight t
       :after ivy
       :defer nil
       :bind (("M-x" . counsel-M-x)
	      ("C-s" . swiper-isearch)
	      ("C-x C-f" . counsel-find-file)
	      ("C-x M-f" . counsel-project-file-jump)
	      ("C-x d" . counsel-dired)
	      ("C-c w" . hydra-window/body)))

     (use-package ace-window
       :straight t)

     (defun counsel-project-file-jump ()
       (interactive)
       (counsel-file-jump nil (projectile-project-p)))

     (pretty-hydra-define hydra-window
       (:color amaranth :quit-key "q")
       ("Buffer"
	(("," previous-buffer "previous")
	 ("." next-buffer "next")
	 ("bb" counsel-ibuffer "jump buffer")
	 ("c" crux-create-scratch-buffer "scratch")
	 ("k" kill-current-buffer "kill"))
	"Window"
	(("ww" ace-window "switch")
	 ("s" ace-swap-window "swap")
	 ("v" split-window-below "split below")
	 ("h" split-window-right "wplit right")
	 ("wk" delete-window "kill")
	 ("f" delete-other-windows "fullscreen"))))
   #+END_SRC
   
** Magit
   #+BEGIN_SRC emacs-lisp
     (use-package magit
       :straight t
       :config
       (defalias 'magit-diff-visit-file 'magit-diff-visit-file-other-window)
       :pretty-hydra
       ((:color teal :quit-key "q")
	("View"
	 (("s" magit-status "status")
	  ("l" magit-log-all-branches "log")
	  ("b" magit-blame "blame"))
	 "Do"
	 (("p" magit-push "push")
	  ("z" magit-stash "stash"))))
       :bind (("C-c g h" . magit-hydra/body)
	      ("C-c g g")))
   #+END_SRC

** Crux
   #+BEGIN_SRC emacs-lisp
     (use-package crux
       :straight t
       :bind (("C-k" . crux-smart-kill-line)
	      ("C-a" . crux-move-beginning-of-line)))
   #+END_SRC
   
** Helpful
   #+BEGIN_SRC emacs-lisp
     (use-package helpful
       :straight t)
   #+END_SRC

* Language Support
** General completion
   #+BEGIN_SRC emacs-lisp
     (use-package company
       :straight t
       :config
       (global-company-mode))

     (use-package lsp-mode
       :straight t
       :init
       (setq lsp-keymap-prefix "C-c l")
       :config
       :hook ((lsp-mode . lsp-enable-which-key-integration)
	      (go-ts-mode . lsp-deferred)))

     (use-package lsp-ui
       :straight t)
   #+END_SRC
** Flycheck
   #+BEGIN_SRC emacs-lisp
     (use-package flycheck
       :straight t
       :init (global-flycheck-mode))
   #+END_SRC
** Treesit
#+BEGIN_SRC emacs-lisp
  (use-package treesit-auto
    :straight t
    :config
    (global-treesit-auto-mode))

  (dolist (v '(("\\.go$" . go-ts-mode)
	       ("/go.mod$" . go-mod-ts-mode)))
    (add-to-list 'auto-mode-alist v))
#+END_SRC
